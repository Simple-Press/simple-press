(function(spj,$,undefined){var result;function validateThis(e,t){var o="";return 0===e.value.length&&(o="<strong>"+t+"</strong><br>"),o}spj.loadTool=function(e,t,o){""!==o&&(document.getElementById(t).innerHTML='<br /><br /><img src="'+o+'" /><br />'),$("#"+t).load(e)},spj.clearIt=function(e){spj.editorSetText("")},spj.setProcessFlag=function(e){return sp_platform_vars.saveprocess=!0,!0},spj.validatePostForm=function(e,t,o,s){sp_platform_vars.saveprocess=!0;var a="";1==t&&"undefined"!=e.guestname&&(a+=validateThis(e.guestname,sp_forum_vars.noguestname)),1==t&&"undefined"!=e.guestemail&&(a+=validateThis(e.guestemail,sp_forum_vars.noguestemail)),1==o&&"undefined"!=e.newtopicname&&(a+=validateThis(e.newtopicname,sp_forum_vars.notopictitle)),a+=spj.editorValidateContent(e.postitem,sp_forum_vars.nocontent);var n=spj.editorGetContent(e),p=!1,r=new Array;for(r[0]="MsoPlainText",r[1]="MsoNormal",r[2]="mso-layout-grid-align",r[3]="mso-pagination",r[4]="white-space:",i=0;i<r.length;i++)null!==n.match(r[i])&&(p=!0);p&&(a+="<strong>"+sp_forum_vars.rejected+"</strong><br />"),n.match("<iframe")&&"yes"==sp_platform_vars.checkiframe&&(a+="<strong>"+sp_forum_vars.iframe+"</strong><br />"),n.match("<object")&&"yes"==sp_platform_vars.checkiframe&&(a+="<strong>"+sp_forum_vars.object_tag+"</strong><br />"),n.match("<embed")&&"yes"==sp_platform_vars.checkiframe&&(a+="<strong>"+sp_forum_vars.embed_tag+"</strong><br />"),sp_platform_vars.postvalue!=undefined&&document.getElementById("spPostValue")==undefined&&(a+="<strong>"+sp_forum_vars.nocaptcha+"</strong><br>");var l="";if(""!==a)return l=sp_forum_vars.problem+"<br>"+a,$("#spPostNotifications").html(l),$("#spPostNotifications").show("slow"),!1;var c=document.getElementById("sfsave");return c.value=sp_forum_vars.savingpost,c.disabled="disabled",l=sp_forum_vars.savingpost+" - "+sp_forum_vars.wait,spj.displayNotification(2,l),!0},spj.validateSearch=function(e,t,o,s){var a=!1,n="",p=$("#searchvalue").val();if(""===p)n=sp_forum_vars.nosearch,a=!0;else{var r=p.split(" "),l=0,c=0;for(i=0;i<r.length;i++)r[i].length<s?c++:l++;0===l?(n=sp_forum_vars.allwordmin+" "+s,a=!0):0!==c&&(n=sp_forum_vars.somewordmin+" "+s)}if(""!==n&&spj.displayNotification(1,n),!1!==a||"link"!=o)return!0!==a;document.sfsearch.submit()},spj.openEditor=function(e,t){$(document).ready(function(){!$("#spHeadPad").length&&sp_platform_vars.headpadding>0&&($("#"+e).before("<div id='spHeadPad'>&nbsp;</div>"),$("#spHeadPad").css("height",sp_platform_vars.headpadding+"px")),$("#"+e).slideDown(),window.location.hash||(location.href=location.href+"#spEditFormAnchor"),spj.editorOpen(t),$("html, body").animate({scrollTop:$("#"+e).offset().top-sp_platform_vars.headpadding},500)})},spj.openEditorBox=function(e){$("#"+e).slideToggle()},spj.toggleLayer=function(e,t){t||(t="slow"),$("#"+e).slideToggle(t);var o=document.getElementById(e);"spPostForm"!=e&&"sfsearchform"!=e||o.scrollIntoView(),"spPostForm"==e&&sp_platform_vars.headpadding>0&&$("#spHeadPad").detach()},spj.quotePost=function(e,t,o,s){s+="&post="+e+"&forumid="+o,$("#spPostForm").show("normal",function(){spj.openEditor("spPostForm","post"),$.ajax({url:s}).done(function(e,o){spj.editorInsertContent(t,e)})})},spj.setPostButton=function(e,t,o,s,i){var a=document.addpost.newpost;e.value==t+o?(a.disabled=!1,a.value=s):(a.disabled=!0,a.value=i)},spj.setTopicButton=function(e,t,o,s,i){var a=document.addtopic.newtopic;e.value==t+o?(a.disabled=!1,a.value=s):(a.disabled=!0,a.value=i)},spj.changeUrl=function(e){var t=e.selectedIndex;t>0&&"#"!==e.options[t].value&&(window.location=e.options[t].value)},spj.redirect=function(e){window.location=e},spj.displayNotification=function(e,t){$(document).ready(function(){var o="<div id='spNotification' ",s="",i="";0==e&&(s=successImage.src,i="spMessageSuccess"),1==e&&(s=failureImage.src,i="spMessageFailure"),2==e&&(s=waitImage.src,i="spMessageWait"),o+="class='"+i+"'><img src='"+s+"' alt='' /><div style='clear:both'></div><p>"+t+"</p></div>";var a=(i=document.getElementById("spMainContainer")).getBoundingClientRect(),n=new Number(a.left),p=new Number(a.right-a.left),r=new Number(0);r=p<260?Math.round((p-20)/2):150;var l=Math.round(p/2+n-r);if($("#spMainContainer").prepend(o),$("#spNotification").css("left",l),$("#spNotification").css("width",2*r),$("#spNotification").show(),sp_platform_vars.headpadding>0){var c=$("#spNotification").offset();c.top=Math.round(parseInt(sp_platform_vars.headpadding)+parseInt(c.top)),$("#spNotification").offset({top:c.top,left:c.left})}$("#spNotification").fadeOut(8e3,function(){$("#spNotification").remove()})})},spj.autoUpdate=function(e,t){window.setInterval("spj.performUpdates('"+e+"')",t)},spj.performUpdates=function(url){for(updates=url.split("%"),i=0;i<updates.length;i++){up=updates[i].split(",");var func=up[0]+"('"+up[1]+"')";func=func.replace(/&amp;/gi,"&"),eval(func)}},spj.selectCode=function(e){var t=document.getElementById(e);window.getSelection?(s=window.getSelection(),s.setBaseAndExtent?s.setBaseAndExtent(t,0,t,t.innerText.length-1):(r=document.createRange(),r.selectNodeContents(t),s.removeAllRanges(),s.addRange(r))):document.getSelection?(s=document.getSelection(),r=document.createRange(),r.selectNodeContents(t),s.removeAllRanges(),s.addRange(r)):document.selection&&(r=document.body.createTextRange(),r.moveToElementText(t),r.select())},spj.removeAvatar=function(e,t,o){$("#"+t).html('<img src="'+o+'" />'),$("#"+t).load(e),$("#spDeleteUploadedAvatar").hide()},spj.removePool=function(e,t,o){$("#"+t).html('<img src="'+o+'" />'),$("#"+t).load(e),$("#spDeletePoolAvatar").hide()},spj.selectAvatar=function(e,t,o){$("#spPoolAvatar").val(t),text='<img src="'+e+'" alt="" /><br /><br />',text=text+'<div id="spPoolStatus">'+o+"</div",$("#spAvatarPool").html(text)},spj.removeNotice=function(e,t){$("#"+t).slideUp(400,function(){$("#"+t).load(e),$("#"+t).remove(),$.trim($("#spUserNotices").html()).length||$("#spUserNotices").slideUp()})},spj.toggleSpoiler=function(e,t,o){spj.toggleLayer("spSpoilerContent"+e,"fast"),cur=$("#spSpoilerState"+e).val(),0==cur?($("#spSpoilerState"+e).val(1),$("#spRevealLink"+e).html(o)):($("#spSpoilerState"+e).val(0),$("#spRevealLink"+e).html(t))},spj.setProfileDataHeight=function(){baseHeight=Math.max($("#spProfileData").outerHeight(!0)+10,$("#spProfileMenu").outerHeight(!0)),$("#spProfileContent").height(baseHeight+$("#spProfileHeader").outerHeight(!0))},spj.openCloseForums=function(e,t,o,s,i,a,n){var p="",r="";"block"==$("#"+e).css("display")?($("#"+e).slideUp(),p=s,r=a,spj.cookie(e,"closed",{expires:30,path:"/"})):($("#"+e).slideDown(),p=i,r=n,spj.cookie(e,"open",{expires:30,path:"/"})),$("#"+t).html('<img class="'+o+'" src="'+p+'" title="'+r+'" />')},spj.openCloseSection=function(e,t,o,s,i,a,n,p,r,l){var c="",d="";"block"==$("#"+e).css("display")?($("#"+e).slideUp(),c=s,d=a,p&&spj.cookie(e,"closed",{expires:30,path:"/"})):($("#"+e).slideDown(),c=i,d=n,p&&spj.cookie(e,"open",{expires:30,path:"/"})),1==r?$("#"+t).text(d):$("#"+t).html('<img class="'+o+'" src="'+c+'" title="'+d+'" />'),$("#"+t).css("cursor","pointer")},spj.inlineTopics=function(e,t,o,s,i,a){var n="";"block"==$("#"+e).css("display")?($("#"+e).slideUp(),n=i):(""===$("#"+e).html()?($("#"+e).html('<img src="'+o+'" />'),$("#"+e).slideDown(),$("#"+e).load(t,function(){$("#"+e).slideDown()})):$("#"+e).slideDown(),n=a),$("#"+s).html('<img src="'+n+'" />')},spj.popupImage=function(e,t,o,s){var i=0,a=window.innerWidth-75,n=window.innerHeight-75,p=t,r=o;s&&(t>a&&(i=a/t*100,t=Math.round(i*t)/100,o=Math.round(i*o)/100),o>n&&(i=n/o*100,t=Math.round(i*t)/100,o=Math.round(i*o)/100)),t="auto"==p?p:t,o="auto"==r?r:o,imgSource='<div><a href="'+e+'" target="_blank"><img class="spPopupImg" src="'+e+'" width="'+t+'" height="'+o+'" /></a></div>',"auto"!=t&&(t=Math.abs(t)+10),"auto"!=o&&(o=Math.abs(o)+60.8);var l=e.replace(/^.*[\\\/]/,"");$(imgSource).dialog({show:!0,hide:"clip",draggable:!0,resizable:!1,closeText:"",modal:!0,closeOnEscape:!0,width:t,height:o,autoOpen:!0,title:l})},spj.deletePost=function(e,t,o){if(confirm(sp_forum_vars.deletepost)){$("#dialog").dialog("close");var s=$("#postlist"+o+' > div.spTopicPostSection:not([style*="display: none"])').length;$.ajax({type:"GET",url:e+"&count="+s,cache:!1,success:function(e){""!=e?spj.displayNotification(1,"Could not delete post"):$("#eachPost"+t).slideUp(function(){spj.displayNotification(0,sp_forum_vars.postdeleted),""!=e&&(window.location=e)})}})}},spj.deleteTopic=function(e,t,o){if(confirm(sp_forum_vars.deletetopic)){$("#dialog").dialog("close");var s=$("#topiclist"+o+' > div.spForumTopicSection:not([style*="display: none"])').length;$.ajax({type:"GET",url:e+"&count="+s,cache:!1,success:function(e){""!=e?spj.displayNotification(1,"Could not delete topic"):$("#eachTopic"+t).slideUp(function(){spj.displayNotification(0,sp_forum_vars.topicdeleted);var t=""!=e?e:window.location.href;window.location.href=t})}})}},spj.markRead=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(e){$("#spUnreadCount").html("0"),spj.displayNotification(0,sp_forum_vars.markread)}})},spj.markForumRead=function(e,t){$.ajax({type:"GET",url:e,cache:!1,success:function(e){var o=parseInt($("#spUnreadCount").html());o-=t,$("#spMarkForumRead").hide(),$("#spUnreadCount").html(o),spj.displayNotification(0,sp_forum_vars.markforumread)}})},spj.pinPost=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(e){""!=e?spj.displayNotification(1,"Could not pin post"):spj.displayNotification(0,sp_forum_vars.pinpost)}})},spj.pinTopic=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(e){""!=e?spj.displayNotification(1,"Could not pin topic"):spj.displayNotification(0,sp_forum_vars.pintopic)}})},spj.lockTopic=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(e){""!=e?spj.displayNotification(1,"Could not lock topic"):spj.displayNotification(0,sp_forum_vars.locktopic)}})},spj.pageJump=function(){url=$("#url").val(),page=$("#pageNum").val(),max=$("#max").val(),""!=url&&""!=page&&""!=max||(page=1),page=Math.max(page,1),page=Math.min(page,max),jumpUrl=url+"page-"+page,window.location=jumpUrl},spj.openQuickLinks=function(e,t,o,s){var i="";"block"==$("#"+e).css("display")?($("#"+e).slideUp(),i=o):($("#"+e).slideDown(),i=s),$("#"+t).html('<img src="'+i+'" />')},spj.resetMobileMenu=function(){$("#spMobilePanel").hide("slide",{direction:"down"})},spj.cancelScript=function(){"mobile"==sp_platform_vars.device?$("#spMobilePanel").hide("slide",{direction:"down"}):$("#dialog").dialog("close")}})(window.spj=window.spj||{},jQuery);