(function(spj,$,undefined){var result;spj.loadTool=function(e,o,t){t!==""&&(document.getElementById(o).innerHTML='<br /><br /><img src="'+t+'" /><br />'),$("#"+o).load(e)},spj.clearIt=function(e){spj.editorSetText("")},spj.setProcessFlag=function(e){return sp_platform_vars.saveprocess=!0,!0},spj.validatePostForm=function(e,o,t,p){sp_platform_vars.saveprocess=!0;var a="";o==1&&e.guestname!="undefined"&&(a+=validateThis(e.guestname,sp_forum_vars.noguestname)),o==1&&e.guestemail!="undefined"&&(a+=validateThis(e.guestemail,sp_forum_vars.noguestemail)),t==1&&e.newtopicname!="undefined"&&(a+=validateThis(e.newtopicname,sp_forum_vars.notopictitle)),a+=spj.editorValidateContent(e.postitem,sp_forum_vars.nocontent);var n=spj.editorGetContent(e),f=!1,l=new Array;for(l[0]="MsoPlainText",l[1]="MsoNormal",l[2]="mso-layout-grid-align",l[3]="mso-pagination",l[4]="white-space:",i=0;i<l.length;i++)n.match(l[i])!==null&&(f=!0);f&&(a+="<strong>"+sp_forum_vars.rejected+"</strong><br />"),n.match("<iframe")&&sp_platform_vars.checkiframe=="yes"&&(a+="<strong>"+sp_forum_vars.iframe+"</strong><br />"),n.match("<object")&&sp_platform_vars.checkiframe=="yes"&&(a+="<strong>"+sp_forum_vars.object_tag+"</strong><br />"),n.match("<embed")&&sp_platform_vars.checkiframe=="yes"&&(a+="<strong>"+sp_forum_vars.embed_tag+"</strong><br />"),sp_platform_vars.postvalue!=undefined&&document.getElementById("spPostValue")==undefined&&(a+="<strong>"+sp_forum_vars.nocaptcha+"</strong><br>");var c="";if(a!=="")return c=sp_forum_vars.problem+"<br>"+a,$("#spPostNotifications").html(c),$("#spPostNotifications").show("slow"),!1;var u=document.getElementById("sfsave");return u.value=sp_forum_vars.savingpost,u.disabled="disabled",c=sp_forum_vars.savingpost+" - "+sp_forum_vars.wait,spj.displayNotification(2,c),!0},spj.validateSearch=function(e,o,t,p){var a=!1,n="",f=$("#searchvalue").val();if(f==="")n=sp_forum_vars.nosearch,a=!0;else{var l=f.split(" "),c=0,u=0;for(i=0;i<l.length;i++)l[i].length<p?u++:c++;c===0?(n=sp_forum_vars.allwordmin+" "+p,a=!0):u!==0&&(n=sp_forum_vars.somewordmin+" "+p)}if(n!==""&&spj.displayNotification(1,n),a===!1&&t=="link"){document.sfsearch.submit();return}return a!==!0},spj.openEditor=function(e,o){$(document).ready(function(){!$("#spHeadPad").length&&sp_platform_vars.headpadding>0&&($("#"+e).before("<div id='spHeadPad'>&nbsp;</div>"),$("#spHeadPad").css("height",sp_platform_vars.headpadding+"px")),$("#"+e).slideDown(),window.location.hash||(location.href=location.href+"#spEditFormAnchor"),spj.editorOpen(o),$("html, body").animate({scrollTop:$("#"+e).offset().top-sp_platform_vars.headpadding},500)})},spj.openEditorBox=function(e){$("#"+e).slideToggle()},spj.toggleLayer=function(e,o){o||(o="slow"),$("#"+e).slideToggle(o);var t=document.getElementById(e);(e=="spPostForm"||e=="sfsearchform")&&t.scrollIntoView(),e=="spPostForm"&&sp_platform_vars.headpadding>0&&$("#spHeadPad").detach()},spj.quotePost=function(e,o,t,p){p+="&post="+e+"&forumid="+t,$("#spPostForm").show("normal",function(){spj.openEditor("spPostForm","post"),$.ajax({url:p}).done(function(a,n){spj.editorInsertContent(o,a)})})},spj.setPostButton=function(e,o,t,p,a){var n=document.addpost.newpost;e.value==o+t?(n.disabled=!1,n.value=p):(n.disabled=!0,n.value=a)},spj.setTopicButton=function(e,o,t,p,a){var n=document.addtopic.newtopic;e.value==o+t?(n.disabled=!1,n.value=p):(n.disabled=!0,n.value=a)},spj.changeUrl=function(e){var o=e.selectedIndex;o>0&&e.options[o].value!=="#"&&(window.location=e.options[o].value)},spj.redirect=function(e){window.location=e},spj.displayNotification=function(e,o){$(document).ready(function(){var t="<div id='spNotification' ",p="",a="";e==0&&(p=successImage.src,a="spMessageSuccess"),e==1&&(p=failureImage.src,a="spMessageFailure"),e==2&&(p=waitImage.src,a="spMessageWait"),t+="class='"+a+"'><img src='"+p+"' alt='' /><div style='clear:both'></div><p>"+o+"</p></div>",a=document.getElementById("spMainContainer");var n=a.getBoundingClientRect(),f=new Number(n.left),l=new Number(n.right-n.left),c=new Number(0);l<260?c=Math.round((l-20)/2):c=150;var u=Math.round(l/2+f-c);if($("#spMainContainer").prepend(t),$("#spNotification").css("left",u),$("#spNotification").css("width",c*2),$("#spNotification").show(),sp_platform_vars.headpadding>0){var d=$("#spNotification").offset();d.top=Math.round(parseInt(sp_platform_vars.headpadding)+parseInt(d.top)),$("#spNotification").offset({top:d.top,left:d.left})}$("#spNotification").fadeOut(8e3,function(){$("#spNotification").remove()})})},spj.autoUpdate=function(e,o){var t=window.setInterval("spj.performUpdates('"+e+"')",o)},spj.performUpdates=function(url){for(updates=url.split("%"),i=0;i<updates.length;i++){up=updates[i].split(",");var func=up[0]+"('"+up[1]+"')";func=func.replace(/&amp;/gi,"&"),eval(func)}},spj.selectCode=function(e){var o=document.getElementById(e);window.getSelection?(s=window.getSelection(),s.setBaseAndExtent?s.setBaseAndExtent(o,0,o,o.innerText.length-1):(r=document.createRange(),r.selectNodeContents(o),s.removeAllRanges(),s.addRange(r))):document.getSelection?(s=document.getSelection(),r=document.createRange(),r.selectNodeContents(o),s.removeAllRanges(),s.addRange(r)):document.selection&&(r=document.body.createTextRange(),r.moveToElementText(o),r.select())},spj.removeAvatar=function(e,o,t){$("#"+o).html('<img src="'+t+'" />'),$("#"+o).load(e),$("#spDeleteUploadedAvatar").hide()},spj.removePool=function(e,o,t){$("#"+o).html('<img src="'+t+'" />'),$("#"+o).load(e),$("#spDeletePoolAvatar").hide()},spj.selectAvatar=function(e,o,t){$("#spPoolAvatar").val(o),text='<img src="'+e+'" alt="" /><br /><br />',text=text+'<div id="spPoolStatus">'+t+"</div",$("#spAvatarPool").html(text)},spj.removeNotice=function(e,o){$("#"+o).slideUp(400,function(){$("#"+o).load(e),$("#"+o).remove(),$.trim($("#spUserNotices").html()).length||$("#spUserNotices").slideUp()})},spj.toggleSpoiler=function(e,o,t){spj.toggleLayer("spSpoilerContent"+e,"fast"),cur=$("#spSpoilerState"+e).val(),cur==0?($("#spSpoilerState"+e).val(1),$("#spRevealLink"+e).html(t)):($("#spSpoilerState"+e).val(0),$("#spRevealLink"+e).html(o))},spj.setProfileDataHeight=function(){baseHeight=Math.max($("#spProfileData").outerHeight(!0)+10,$("#spProfileMenu").outerHeight(!0)),$("#spProfileContent").height(baseHeight+$("#spProfileHeader").outerHeight(!0))},spj.openCloseForums=function(e,o,t,p,a,n,f){var l="",c="",u=$("#"+e).css("display");u=="block"?($("#"+e).slideUp(),l=p,c=n,spj.cookie(e,"closed",{expires:30,path:"/"})):($("#"+e).slideDown(),l=a,c=f,spj.cookie(e,"open",{expires:30,path:"/"})),$("#"+o).html('<img class="'+t+'" src="'+l+'" title="'+c+'" />')},spj.openCloseSection=function(e,o,t,p,a,n,f,l,c,u){var d="",m="",v=$("#"+e).css("display");v=="block"?($("#"+e).slideUp(),d=p,m=n,l&&spj.cookie(e,"closed",{expires:30,path:"/"})):($("#"+e).slideDown(),d=a,m=f,l&&spj.cookie(e,"open",{expires:30,path:"/"})),c==!0?$("#"+o).text(m):$("#"+o).html('<img class="'+t+'" src="'+d+'" title="'+m+'" />'),$("#"+o).css("cursor","pointer")},spj.inlineTopics=function(e,o,t,p,a,n){var f="",l=$("#"+e).css("display");l=="block"?($("#"+e).slideUp(),f=a):($("#"+e).html()===""?($("#"+e).html('<img src="'+t+'" />'),$("#"+e).slideDown(),$("#"+e).load(o,function(){$("#"+e).slideDown()})):$("#"+e).slideDown(),f=n),$("#"+p).html('<img src="'+f+'" />')},spj.popupImage=function(e,o,t,p){var a=0,n=window.innerWidth-75,f=window.innerHeight-75,l=o,c=t;p&&(o>n&&(a=n/o*100,o=Math.round(a*o)/100,t=Math.round(a*t)/100),t>f&&(a=f/t*100,o=Math.round(a*o)/100,t=Math.round(a*t)/100)),o=l=="auto"?l:o,t=c=="auto"?c:t,imgSource='<div><a href="'+e+'" target="_blank"><img class="spPopupImg" src="'+e+'" width="'+o+'" height="'+t+'" /></a></div>',o!="auto"&&(o=Math.abs(o)+10),t!="auto"&&(t=Math.abs(t)+60.8);var u=e.replace(/^.*[\\\/]/,"");$(imgSource).dialog({show:!0,hide:"clip",draggable:!0,resizable:!1,closeText:"",modal:!0,closeOnEscape:!0,width:o,height:t,autoOpen:!0,title:u})},spj.deletePost=function(e,o,t){if(confirm(sp_forum_vars.deletepost)){$("#dialog").dialog("close");var p=$("#postlist"+t+' > div.spTopicPostSection:not([style*="display: none"])').length;$.ajax({type:"GET",url:e+"&count="+p,cache:!1,success:function(a){if(a==""){$("#eachPost"+o).slideUp(function(){spj.displayNotification(0,sp_forum_vars.postdeleted),a!=""&&(window.location=a)});return}spj.displayNotification(1,"Could not delete post")}})}},spj.deleteTopic=function(e,o,t){confirm(sp_forum_vars.deletetopic)&&$.ajax({type:"GET",url:e,cache:!1,success:function(p){p==""?spj.displayNotification(1,"Could not delete topic"):(spj.displayNotification(0,"Topic deleted"),window.location=p)}})},spj.markRead=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(o){$("#spUnreadCount").html("0"),spj.displayNotification(0,sp_forum_vars.markread)}})},spj.markForumRead=function(e,o){$.ajax({type:"GET",url:e,cache:!1,success:function(t){var p=parseInt($("#spUnreadCount").html());p=p-o,$("#spMarkForumRead").hide(),$("#spUnreadCount").html(p),spj.displayNotification(0,sp_forum_vars.markforumread)}})},spj.pinPost=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(o){if(o==""){spj.displayNotification(0,sp_forum_vars.pinpost);return}spj.displayNotification(1,"Could not pin post")}})},spj.pinTopic=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(o){if(o==""){spj.displayNotification(0,sp_forum_vars.pintopic);return}spj.displayNotification(1,"Could not pin topic")}})},spj.lockTopic=function(e){$.ajax({type:"GET",url:e,cache:!1,success:function(o){if(o==""){spj.displayNotification(0,sp_forum_vars.locktopic);return}spj.displayNotification(1,"Could not lock topic")}})},spj.pageJump=function(){url=$("#url").val(),page=$("#pageNum").val(),max=$("#max").val(),(url==""||page==""||max=="")&&(page=1),page=Math.max(page,1),page=Math.min(page,max),jumpUrl=url+"page-"+page,window.location=jumpUrl},spj.openQuickLinks=function(e,o,t,p){var a="",n=$("#"+e).css("display");n=="block"?($("#"+e).slideUp(),a=t):($("#"+e).slideDown(),a=p),$("#"+o).html('<img src="'+a+'" />')},spj.resetMobileMenu=function(){$("#spMobilePanel").hide("slide",{direction:"down"})},spj.cancelScript=function(){sp_platform_vars.device=="mobile"?$("#spMobilePanel").hide("slide",{direction:"down"}):$("#dialog").dialog("close")};function validateThis(e,o){var t="";return e.value.length===0&&(t="<strong>"+o+"</strong><br>"),t}})(window.spj=window.spj||{},jQuery);
